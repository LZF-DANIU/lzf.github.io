<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>项目管理系统</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        
        .container {
            display: flex;
            height: 100vh;
        }
        
        .sidebar {
            width: 220px;
            background-color: #2c3e50;
            color: white;
            padding: 20px 0;
            height: 100%;
        }
        
        .sidebar-header {
            padding: 0 20px 20px 20px;
            border-bottom: 1px solid #3d5166;
        }
        
        .sidebar-header h2 {
            margin: 0;
            font-size: 18px;
        }
        
        .sidebar-menu {
            list-style: none;
            padding: 0;
            margin: 20px 0;
        }
        
        .sidebar-menu li {
            padding: 10px 20px;
            cursor: pointer;
        }
        
        .sidebar-menu li:hover, .sidebar-menu li.active {
            background-color: #3d5166;
        }
        
        .sidebar-menu li i {
            margin-right: 10px;
        }
        
        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .search-bar {
            display: flex;
            align-items: center;
            background-color: white;
            border-radius: 4px;
            padding: 8px 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            width: 300px;
        }
        
        .search-bar input {
            border: none;
            outline: none;
            flex: 1;
            margin-left: 10px;
        }
        
        .user-profile {
            display: flex;
            align-items: center;
        }
        
        .user-profile img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .card-title {
            margin: 0;
            font-size: 16px;
            color: #333;
        }
        
        .card-value {
            font-size: 24px;
            font-weight: bold;
            margin: 0;
        }
        
        .table-container {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        th {
            font-weight: 600;
            color: #555;
        }
        
        tr:last-child td {
            border-bottom: none;
        }
        
        .status {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-completed {
            background-color: #e6f7ee;
            color: #0abb75;
        }
        
        .status-in-progress {
            background-color: #fff8e6;
            color: #ffb100;
        }
        
        .status-pending {
            background-color: #f0f0f0;
            color: #777;
        }
        
        .status-delayed {
            background-color: #ffe6e6;
            color: #ff4d4d;
        }
        
        /* 隐藏游戏区域 */
        .game-container {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            z-index: 1000;
            width: 80%;
            max-width: 800px;
            height: 80%;
            max-height: 600px;
            overflow: auto;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .close-game {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
        }
        
        .game-content {
            height: calc(100% - 50px);
            overflow: auto;
        }
        
        /* 紧急关闭按钮 */
        .emergency-close {
            position: fixed;
            top: 10px;
            right: 10px;
            background-color: #ff4d4d;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            cursor: pointer;
            display: none;
            z-index: 1001;
        }
        
        /* 2048游戏样式 */
        .game-2048 {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .game-header-2048 {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .score-container {
            background-color: #bbada0;
            padding: 10px 15px;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            text-align: center;
        }
        
        .grid-container {
            background-color: #bbada0;
            border-radius: 6px;
            padding: 15px;
            position: relative;
            margin: 0 auto;
        }
        
        .grid-row {
            display: flex;
            margin-bottom: 15px;
        }
        
        .grid-row:last-child {
            margin-bottom: 0;
        }
        
        .grid-cell {
            width: 100px;
            height: 100px;
            margin-right: 15px;
            background-color: #cdc1b4;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 36px;
            font-weight: bold;
            color: #776e65;
        }
        
        .grid-cell:last-child {
            margin-right: 0;
        }
        
        .tile-2 { background-color: #eee4da; }
        .tile-4 { background-color: #ede0c8; }
        .tile-8 { background-color: #f2b179; color: white; }
        .tile-16 { background-color: #f59563; color: white; }
        .tile-32 { background-color: #f67c5f; color: white; }
        .tile-64 { background-color: #f65e3b; color: white; }
        .tile-128 { background-color: #edcf72; color: white; font-size: 32px; }
        .tile-256 { background-color: #edcc61; color: white; font-size: 32px; }
        .tile-512 { background-color: #edc850; color: white; font-size: 32px; }
        .tile-1024 { background-color: #edc53f; color: white; font-size: 28px; }
        .tile-2048 { background-color: #edc22e; color: white; font-size: 28px; }
        
        /* 贪吃蛇游戏样式 */
        .game-snake {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .snake-board {
            width: 400px;
            height: 400px;
            border: 3px solid #4CAF50;
            border-radius: 12px;
            margin: 0 auto;
            position: relative;
            background-color: #f8f8f8;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            overflow: hidden;
            background-image: linear-gradient(rgba(76, 175, 80, 0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(76, 175, 80, 0.05) 1px, transparent 1px);
            background-size: 20px 20px;
        }
        
        .snake-controls {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        
        .snake-controls button {
            margin: 0 10px;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .snake-controls button:hover {
            background-color: #3d8b40;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .snake-controls button:active {
            transform: translateY(0);
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        
        .snake-score {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            padding: 10px 20px;
            background-color: #f0f0f0;
            border-radius: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: inline-block;
        }
        
        .snake-instructions {
            text-align: center;
            margin-top: 15px;
            color: #555;
        }
        
        .snake-instructions p {
            margin-bottom: 10px;
        }
        
        .touch-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 10px;
            max-width: 200px;
            margin: 0 auto;
        }
        
        .touch-controls-middle {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin: 5px 0;
        }
        
        .touch-controls button {
            width: 60px;
            height: 60px;
            background-color: rgba(76, 175, 80, 0.8);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 24px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 3px 6px rgba(0,0,0,0.2);
        }
        
        .touch-controls button:hover {
            background-color: rgba(76, 175, 80, 1);
            transform: scale(1.1);
            box-shadow: 0 5px 10px rgba(0,0,0,0.3);
        }
        
        .touch-controls button:active {
            transform: scale(0.95);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        /* 蛇和食物样式 */
        .snake-head {
            background-color: #388E3C !important;
            border-radius: 6px !important;
            z-index: 10;
            box-shadow: 0 0 8px rgba(0,0,0,0.3);
            position: absolute;
            transition: all 0.15s ease;
        }
        
        .snake-body {
            background-color: #4CAF50 !important;
            border-radius: 4px !important;
            z-index: 5;
            position: absolute;
            transition: all 0.15s ease;
        }
        
        .snake-food {
            background-color: #FF5722 !important;
            border-radius: 50% !important;
            z-index: 8;
            position: absolute;
            box-shadow: 0 0 10px rgba(255, 87, 34, 0.6);
            animation: pulse 0.8s infinite alternate;
        }
        
        @keyframes pulse {
            from { transform: scale(0.9); box-shadow: 0 0 5px rgba(255, 87, 34, 0.6); }
            to { transform: scale(1.1); box-shadow: 0 0 15px rgba(255, 87, 34, 0.8); }
        }
        
        /* 响应式设计 */
        @media (max-width: 600px) {
            .snake-board {
                width: 300px;
                height: 300px;
                background-size: 15px 15px;
            }
            
            .touch-controls button {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
        }
        
        @media (max-width: 400px) {
            .snake-board {
                width: 250px;
                height: 250px;
                background-size: 12.5px 12.5px;
            }
            
            .snake-controls {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .touch-controls button {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }
        }
        
        /* 覆盖层 */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 999;
        }
        
        .snake-body {
            position: absolute;
            background-color: #8BC34A;
            border-radius: 30%;
            transition: all 0.1s linear;
        }
        
        @keyframes pulse {
            from { transform: scale(0.95); box-shadow: 0 0 5px rgba(255, 87, 34, 0.7); }
            to { transform: scale(1.05); box-shadow: 0 0 15px rgba(255, 87, 34, 0.8); }
        }
        
        /* 响应式设计 */
        @media (max-width: 500px) {
            .snake-board {
                width: 300px;
                height: 300px;
            }
            
            .snake-controls button {
                padding: 8px 15px;
                font-size: 14px;
            }
            
            .snake-score {
                font-size: 20px;
            }
            
            .touch-controls button {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
        }
        
        /* 覆盖层 */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 999;
        }
        
        /* 项目管理样式 */
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .project-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 15px;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }
        
        .project-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .project-header h3 {
            margin: 0;
            color: #2c3e50;
        }
        
        .project-status {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .project-info p {
            margin: 8px 0;
            font-size: 14px;
        }
        
        .project-progress {
            margin: 15px 0;
        }
        
        .progress-bar {
            height: 8px;
            background-color: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: #3498db;
        }
        
        .project-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 15px;
        }
        
        .btn-view, .btn-edit, .btn-add-project, .btn-generate, .btn-export, .btn-save, #add-task-btn {
            cursor: pointer;
            border: none;
            border-radius: 4px;
            padding: 8px 15px;
            color: white;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .btn-view {
            background-color: #2ecc71;
        }
        
        .btn-view:hover {
            background-color: #27ae60;
        }
        
        .btn-edit {
            background-color: #f39c12;
        }
        
        .btn-edit:hover {
            background-color: #e67e22;
        }
        
        .btn-add-project {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            background-color: #3498db;
        }
        
        .btn-add-project:hover {
            background-color: #2980b9;
        }
        
        /* 任务管理样式 */
        .tasks-filter {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .tasks-filter select, .tasks-filter input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .tasks-filter input {
            flex: 1;
            margin-left: 15px;
        }
        
        .tasks-list {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .task-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        
        .task-item:last-child {
            border-bottom: none;
        }
        
        .task-item input[type="checkbox"] {
            margin-right: 10px;
        }
        
        .task-item label {
            flex: 1;
            margin-right: 15px;
        }
        
        .task-item label.completed {
            text-decoration: line-through;
            color: #999;
        }
        
        .task-due {
            margin-right: 15px;
            font-size: 14px;
            color: #666;
        }
        
        .task-priority {
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: bold;
            color: white;
        }
        
        .task-priority.high {
            background-color: #e74c3c;
        }
        
        .task-priority.medium {
            background-color: #f39c12;
        }
        
        .task-priority.low {
            background-color: #3498db;
        }
        
        .add-task {
            display: flex;
            margin-top: 20px;
        }
        
        .add-task input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px 0 0 4px;
            outline: none;
        }
        
        #add-task-btn {
            border-radius: 0 4px 4px 0;
            background-color: #3498db;
        }
        
        #add-task-btn:hover {
            background-color: #2980b9;
        }
        
        /* 团队成员样式 */
        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
        }
        
        .team-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .team-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }
        
        .team-card img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin-bottom: 15px;
        }
        
        .team-card h3 {
            margin: 0 0 5px 0;
            color: #2c3e50;
        }
        
        .team-role {
            color: #7f8c8d;
            margin: 0 0 10px 0;
        }
        
        .team-contact {
            font-size: 14px;
            color: #3498db;
            margin: 0 0 15px 0;
        }
        
        .team-projects {
            background-color: #f5f5f5;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .team-card.add-member {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            background-color: #f9f9f9;
            border: 2px dashed #ddd;
        }
        
        .add-icon {
            font-size: 30px;
            color: #3498db;
            margin-bottom: 10px;
        }
        
        /* 报表样式 */
        .reports-filters {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .date-range, .report-type {
            display: flex;
            align-items: center;
        }
        
        .date-range label, .report-type label {
            margin-right: 10px;
            font-weight: bold;
        }
        
        .date-range select, .report-type select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .btn-generate {
            background-color: #3498db;
        }
        
        .btn-generate:hover {
            background-color: #2980b9;
        }
        
        .reports-charts {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .chart-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .chart-container h3 {
            margin-top: 0;
            margin-bottom: 15px;
            color: #2c3e50;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .chart-placeholder {
            height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
        }
        
        .bar-chart {
            display: flex;
            align-items: flex-end;
            height: 200px;
            width: 100%;
            justify-content: space-around;
        }
        
        .bar {
            width: 40px;
            background-color: #3498db;
            border-radius: 4px 4px 0 0;
            position: relative;
            transition: height 0.5s;
        }
        
        .bar span {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 12px;
            white-space: nowrap;
        }
        
        .chart-axis {
            margin-top: 30px;
            font-size: 14px;
            color: #7f8c8d;
        }
        
        .pie-chart {
            position: relative;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: conic-gradient(
                #4CAF50 0% 25%,
                #2196F3 25% 70%,
                #FFC107 70% 85%,
                #9E9E9E 85% 100%
            );
        }
        
        .pie-segment {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: white;
            font-size: 14px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .reports-summary {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .reports-summary h3 {
            margin-top: 0;
            margin-bottom: 15px;
            color: #2c3e50;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .reports-summary ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .reports-summary li {
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .btn-export {
            display: block;
            margin: 0 auto;
            padding: 10px 20px;
            background-color: #27ae60;
        }
        
        .btn-export:hover {
            background-color: #219653;
        }
        
        /* 设置样式 */
        .settings-section {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .settings-section h3 {
            margin-top: 0;
            margin-bottom: 15px;
            color: #2c3e50;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .settings-form .form-group {
            margin-bottom: 15px;
        }
        
        .settings-form label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .settings-form input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .btn-save {
            background-color: #27ae60;
            margin-top: 10px;
        }
        
        .btn-save:hover {
            background-color: #219653;
        }
        
        .settings-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .option-item {
            display: flex;
            align-items: center;
        }
        
        .option-item input[type="checkbox"] {
            margin-right: 10px;
        }
        
        .theme-options {
            display: flex;
            gap: 20px;
        }
        
        .theme-option {
            text-align: center;
            cursor: pointer;
        }
        
        .theme-preview {
            width: 80px;
            height: 50px;
            border-radius: 4px;
            margin-bottom: 5px;
            border: 2px solid transparent;
        }
        
        .theme-option.active .theme-preview {
            border-color: #3498db;
        }
        
        .theme-preview.light {
            background-color: #f5f5f5;
        }
        
        .theme-preview.dark {
            background-color: #2c3e50;
        }
        
        .theme-preview.blue {
            background-color: #3498db;
        }
        
        .language-select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 200px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>项目管理系统</h2>
            </div>
            <ul class="sidebar-menu">
                <li class="active" onclick="showDashboard('📊 仪表盘')"><i>📊</i> 仪表盘</li>
                <li onclick="showDashboard('📋 项目')"><i>📋</i> 项目</li>
                <li onclick="showDashboard('✅ 任务')"><i>✅</i> 任务</li>
                <li onclick="showDashboard('👥 团队')"><i>👥</i> 团队</li>
                <li onclick="showDashboard('📈 报表')"><i>📈</i> 报表</li>
                <li onclick="showDashboard('⚙️ 设置')"><i>⚙️</i> 设置</li>
                <li onclick="toggleGame('2048')"><i>🎮</i> <span class="hidden-menu">大屏</span></li>
                <li onclick="toggleGame('snake')"><i>🐍</i> <span class="hidden-menu">报表</span></li>
            </ul>
        </div>
        
        <div class="main-content">
            <div class="header">
                <div class="search-bar">
                    <i>🔍</i>
                    <input type="text" placeholder="搜索项目、任务或文档...">
                </div>
                <div class="user-profile">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxMDAiIGN5PSIxMDAiIHI9IjEwMCIgZmlsbD0iIzJjM2U1MCIvPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjgwIiByPSI0MCIgZmlsbD0iI2VjZjBmMSIvPjxwYXRoIGQ9Ik0xNjAgMTgwYzAtMzMuMTM3LTI2Ljg2My02MC02MC02MHMtNjAgMjYuODYzLTYwIDYwIiBmaWxsPSIjZWNmMGYxIi8+PC9zdmc+" alt="用户头像">
                    <span>用户名</span>
                </div>
            </div>
            
            <div class="dashboard">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">进行中的项目</h3>
                        <span>📈</span>
                    </div>
                    <p class="card-value">12</p>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">待处理任务</h3>
                        <span>📝</span>
                    </div>
                    <p class="card-value">24</p>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">团队成员</h3>
                        <span>👥</span>
                    </div>
                    <p class="card-value">8</p>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">完成率</h3>
                        <span>✅</span>
                    </div>
                    <p class="card-value">68%</p>
                </div>
            </div>
            
            <div class="table-container">
                <h3>项目进度</h3>
                <table>
                    <thead>
                        <tr>
                            <th>项目名称</th>
                            <th>负责人</th>
                            <th>截止日期</th>
                            <th>状态</th>
                            <th>完成度</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>网站重构</td>
                            <td>张三</td>
                            <td>2023-12-15</td>
                            <td><span class="status status-in-progress">进行中</span></td>
                            <td>65%</td>
                        </tr>
                        <tr>
                            <td>移动应用开发</td>
                            <td>李四</td>
                            <td>2023-11-30</td>
                            <td><span class="status status-delayed">延期</span></td>
                            <td>40%</td>
                        </tr>
                        <tr>
                            <td>数据分析平台</td>
                            <td>王五</td>
                            <td>2023-12-20</td>
                            <td><span class="status status-in-progress">进行中</span></td>
                            <td>30%</td>
                        </tr>
                        <tr>
                            <td>用户调研</td>
                            <td>赵六</td>
                            <td>2023-11-10</td>
                            <td><span class="status status-completed">已完成</span></td>
                            <td>100%</td>
                        </tr>
                        <tr>
                            <td>市场推广</td>
                            <td>钱七</td>
                            <td>2023-12-25</td>
                            <td><span class="status status-pending">未开始</span></td>
                            <td>0%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- 项目内容区域 -->
            <div id="projects-content" style="display: none;">
                <h2>项目管理</h2>
                <div class="projects-grid">
                    <div class="project-card">
                        <div class="project-header">
                            <h3>网站重构</h3>
                            <span class="project-status status-in-progress">进行中</span>
                        </div>
                        <div class="project-info">
                            <p><strong>负责人:</strong> 张三</p>
                            <p><strong>截止日期:</strong> 2023-12-15</p>
                            <p><strong>完成度:</strong> 65%</p>
                        </div>
                        <div class="project-progress">
                            <div class="progress-bar">
                                <div class="progress" style="width: 65%;"></div>
                            </div>
                        </div>
                        <div class="project-actions">
                            <button class="btn-view">查看详情</button>
                            <button class="btn-edit">编辑</button>
                        </div>
                    </div>
                    
                    <div class="project-card">
                        <div class="project-header">
                            <h3>移动应用开发</h3>
                            <span class="project-status status-delayed">延期</span>
                        </div>
                        <div class="project-info">
                            <p><strong>负责人:</strong> 李四</p>
                            <p><strong>截止日期:</strong> 2023-11-30</p>
                            <p><strong>完成度:</strong> 40%</p>
                        </div>
                        <div class="project-progress">
                            <div class="progress-bar">
                                <div class="progress" style="width: 40%;"></div>
                            </div>
                        </div>
                        <div class="project-actions">
                            <button class="btn-view">查看详情</button>
                            <button class="btn-edit">编辑</button>
                        </div>
                    </div>
                    
                    <div class="project-card">
                        <div class="project-header">
                            <h3>数据分析平台</h3>
                            <span class="project-status status-in-progress">进行中</span>
                        </div>
                        <div class="project-info">
                            <p><strong>负责人:</strong> 王五</p>
                            <p><strong>截止日期:</strong> 2023-12-20</p>
                            <p><strong>完成度:</strong> 30%</p>
                        </div>
                        <div class="project-progress">
                            <div class="progress-bar">
                                <div class="progress" style="width: 30%;"></div>
                            </div>
                        </div>
                        <div class="project-actions">
                            <button class="btn-view">查看详情</button>
                            <button class="btn-edit">编辑</button>
                        </div>
                    </div>
                </div>
                <button class="btn-add-project">+ 添加新项目</button>
            </div>
            
            <!-- 任务内容区域 -->
            <div id="tasks-content" style="display: none;">
                <h2>任务管理</h2>
                <div class="tasks-filter">
                    <select id="task-filter">
                        <option value="all">所有任务</option>
                        <option value="pending">待处理</option>
                        <option value="in-progress">进行中</option>
                        <option value="completed">已完成</option>
                    </select>
                    <input type="text" placeholder="搜索任务..." id="task-search">
                </div>
                <div class="tasks-list">
                    <div class="task-item">
                        <input type="checkbox" id="task1">
                        <label for="task1">完成首页设计稿</label>
                        <span class="task-due">今天</span>
                        <span class="task-priority high">高</span>
                    </div>
                    <div class="task-item">
                        <input type="checkbox" id="task2">
                        <label for="task2">修复登录页面的Bug</label>
                        <span class="task-due">明天</span>
                        <span class="task-priority medium">中</span>
                    </div>
                    <div class="task-item">
                        <input type="checkbox" id="task3" checked>
                        <label for="task3" class="completed">准备项目进度报告</label>
                        <span class="task-due">已完成</span>
                        <span class="task-priority low">低</span>
                    </div>
                    <div class="task-item">
                        <input type="checkbox" id="task4">
                        <label for="task4">与客户会议</label>
                        <span class="task-due">2023-11-25</span>
                        <span class="task-priority high">高</span>
                    </div>
                    <div class="task-item">
                        <input type="checkbox" id="task5">
                        <label for="task5">更新API文档</label>
                        <span class="task-due">2023-11-28</span>
                        <span class="task-priority medium">中</span>
                    </div>
                </div>
                <div class="add-task">
                    <input type="text" placeholder="添加新任务..." id="new-task">
                    <button id="add-task-btn">添加</button>
                </div>
            </div>
            
            <!-- 团队内容区域 -->
            <div id="team-content" style="display: none;">
                <h2>团队成员</h2>
                <div class="team-grid">
                    <div class="team-card">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxMDAiIGN5PSIxMDAiIHI9IjEwMCIgZmlsbD0iIzJjM2U1MCIvPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjgwIiByPSI0MCIgZmlsbD0iI2VjZjBmMSIvPjxwYXRoIGQ9Ik0xNjAgMTgwYzAtMzMuMTM3LTI2Ljg2My02MC02MC02MHMtNjAgMjYuODYzLTYwIDYwIiBmaWxsPSIjZWNmMGYxIi8+PC9zdmc+" alt="张三">
                        <h3>张三</h3>
                        <p class="team-role">前端开发</p>
                        <p class="team-contact">zhangsan@example.com</p>
                        <div class="team-projects">负责项目: 3</div>
                    </div>
                    
                    <div class="team-card">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxMDAiIGN5PSIxMDAiIHI9IjEwMCIgZmlsbD0iIzI3YWU2MCIvPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjgwIiByPSI0MCIgZmlsbD0iI2VjZjBmMSIvPjxwYXRoIGQ9Ik0xNjAgMTgwYzAtMzMuMTM3LTI2Ljg2My02MC02MC02MHMtNjAgMjYuODYzLTYwIDYwIiBmaWxsPSIjZWNmMGYxIi8+PC9zdmc+" alt="李四">
                        <h3>李四</h3>
                        <p class="team-role">后端开发</p>
                        <p class="team-contact">lisi@example.com</p>
                        <div class="team-projects">负责项目: 2</div>
                    </div>
                    
                    <div class="team-card">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxMDAiIGN5PSIxMDAiIHI9IjEwMCIgZmlsbD0iIzk5ODBmYSIvPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjgwIiByPSI0MCIgZmlsbD0iI2VjZjBmMSIvPjxwYXRoIGQ9Ik0xNjAgMTgwYzAtMzMuMTM3LTI2Ljg2My02MC02MC02MHMtNjAgMjYuODYzLTYwIDYwIiBmaWxsPSIjZWNmMGYxIi8+PC9zdmc+" alt="王五">
                        <h3>王五</h3>
                        <p class="team-role">数据分析师</p>
                        <p class="team-contact">wangwu@example.com</p>
                        <div class="team-projects">负责项目: 1</div>
                    </div>
                    
                    <div class="team-card">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxMDAiIGN5PSIxMDAiIHI9IjEwMCIgZmlsbD0iI2UxN2I3NyIvPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjgwIiByPSI0MCIgZmlsbD0iI2VjZjBmMSIvPjxwYXRoIGQ9Ik0xNjAgMTgwYzAtMzMuMTM3LTI2Ljg2My02MC02MC02MHMtNjAgMjYuODYzLTYwIDYwIiBmaWxsPSIjZWNmMGYxIi8+PC9zdmc+" alt="赵六">
                        <h3>赵六</h3>
                        <p class="team-role">UI设计师</p>
                        <p class="team-contact">zhaoliu@example.com</p>
                        <div class="team-projects">负责项目: 2</div>
                    </div>
                    
                    <div class="team-card add-member">
                        <div class="add-icon">+</div>
                        <p>添加新成员</p>
                    </div>
                </div>
            </div>
            
            <!-- 报表内容区域 -->
            <div id="reports-content" style="display: none;">
                <h2>数据报表</h2>
                <div class="reports-filters">
                    <div class="date-range">
                        <label>日期范围:</label>
                        <select>
                            <option>本周</option>
                            <option>本月</option>
                            <option>本季度</option>
                            <option>本年</option>
                            <option>自定义</option>
                        </select>
                    </div>
                    <div class="report-type">
                        <label>报表类型:</label>
                        <select>
                            <option>项目进度</option>
                            <option>任务完成率</option>
                            <option>团队工作量</option>
                            <option>资源分配</option>
                        </select>
                    </div>
                    <button class="btn-generate">生成报表</button>
                </div>
                
                <div class="reports-charts">
                    <div class="chart-container">
                        <h3>项目进度概览</h3>
                        <div class="chart-placeholder">
                            <div class="bar-chart">
                                <div class="bar" style="height: 65%;"><span>网站重构</span></div>
                                <div class="bar" style="height: 40%;"><span>移动应用</span></div>
                                <div class="bar" style="height: 30%;"><span>数据平台</span></div>
                                <div class="bar" style="height: 100%;"><span>用户调研</span></div>
                                <div class="bar" style="height: 10%;"><span>市场推广</span></div>
                            </div>
                            <div class="chart-axis">完成百分比</div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <h3>任务状态分布</h3>
                        <div class="chart-placeholder">
                            <div class="pie-chart">
                                <div class="pie-segment" style="--percentage: 25%; --color: #4CAF50;">已完成</div>
                                <div class="pie-segment" style="--percentage: 45%; --color: #2196F3;">进行中</div>
                                <div class="pie-segment" style="--percentage: 15%; --color: #FFC107;">延期</div>
                                <div class="pie-segment" style="--percentage: 15%; --color: #9E9E9E;">未开始</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="reports-summary">
                    <h3>报表摘要</h3>
                    <ul>
                        <li>项目总数: <strong>5</strong></li>
                        <li>已完成项目: <strong>1</strong> (20%)</li>
                        <li>任务总数: <strong>24</strong></li>
                        <li>已完成任务: <strong>8</strong> (33%)</li>
                        <li>平均项目完成率: <strong>47%</strong></li>
                    </ul>
                </div>
                
                <button class="btn-export">导出报表</button>
            </div>
            
            <!-- 设置内容区域 -->
            <div id="settings-content" style="display: none;">
                <h2>系统设置</h2>
                
                <div class="settings-section">
                    <h3>个人信息</h3>
                    <div class="settings-form">
                        <div class="form-group">
                            <label>用户名</label>
                            <input type="text" value="用户名">
                        </div>
                        <div class="form-group">
                            <label>邮箱</label>
                            <input type="email" value="user@example.com">
                        </div>
                        <div class="form-group">
                            <label>密码</label>
                            <input type="password" value="********">
                        </div>
                        <button class="btn-save">保存更改</button>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>通知设置</h3>
                    <div class="settings-options">
                        <div class="option-item">
                            <label>
                                <input type="checkbox" checked>
                                任务提醒
                            </label>
                        </div>
                        <div class="option-item">
                            <label>
                                <input type="checkbox" checked>
                                项目更新
                            </label>
                        </div>
                        <div class="option-item">
                            <label>
                                <input type="checkbox">
                                系统公告
                            </label>
                        </div>
                        <div class="option-item">
                            <label>
                                <input type="checkbox" checked>
                                团队消息
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>主题设置</h3>
                    <div class="theme-options">
                        <div class="theme-option active">
                            <div class="theme-preview light"></div>
                            <span>浅色</span>
                        </div>
                        <div class="theme-option">
                            <div class="theme-preview dark"></div>
                            <span>深色</span>
                        </div>
                        <div class="theme-option">
                            <div class="theme-preview blue"></div>
                            <span>蓝色</span>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>语言设置</h3>
                    <select class="language-select">
                        <option selected>简体中文</option>
                        <option>English</option>
                        <option>日本語</option>
                        <option>한국어</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 游戏容器 -->
    <div class="game-container" id="game-container">
        <div class="game-header">
            <h3 id="game-title">休息一下</h3>
            <button class="close-game" onclick="toggleGame()">×</button>
        </div>
        <div class="game-content" id="game-content">
            <!-- 2048游戏 -->
            <div class="game-2048" id="game-2048" style="display: none;">
                <div class="game-header-2048">
                    <div class="score-container">
                        <div>分数</div>
                        <div id="score">0</div>
                    </div>
                    <button onclick="resetGame2048()">重新开始</button>
                </div>
                <div class="grid-container" id="grid-container">
                    <!-- 4x4网格将由JavaScript生成 -->
                </div>
            </div>
            
            <!-- 贪吃蛇游戏 -->
            <div class="game-snake" id="game-snake" style="display: none;">
                <div class="snake-board" id="snake-board"></div>
                <div class="snake-controls">
                <button onclick="startSnakeGame()">开始游戏</button>
                <button onclick="pauseSnakeGame()">暂停</button>
            </div>
            <div class="snake-instructions">
                <p>使用键盘方向键控制蛇的移动</p>
                <div class="touch-controls">
                    <button id="up-btn">↑</button>
                    <div class="touch-controls-middle">
                        <button id="left-btn">←</button>
                        <button id="right-btn">→</button>
                    </div>
                    <button id="down-btn">↓</button>
                </div>
            </div>
            </div>
        </div>
    </div>
    
    <!-- 紧急关闭按钮 -->
    <button class="emergency-close" id="emergency-close" onclick="emergencyClose()">紧急关闭</button>
    
    <!-- 覆盖层 -->
    <div class="overlay" id="overlay"></div>
    
    <script>
        // 页面加载完成后初始化功能
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化仪表盘
            showDashboard();
            
            // 初始化任务复选框事件
            initTaskCheckboxes();
            
            // 初始化添加任务功能
            initAddTaskFeature();
            
            // 初始化项目卡片交互
            initProjectCards();
            
            // 初始化主题切换功能
            initThemeToggle();
            
            // 初始化报表生成功能
            initReportGeneration();
            
            // 初始化待处理任务数量
            updatePendingTasksCount();
        });
        
        // 显示不同的内容区域
        function showDashboard(navText) {
            // 隐藏所有内容区域
            hideAllContentAreas();
            
            // 移除所有导航项的active类
            const menuItems = document.querySelectorAll('.sidebar-menu li');
            menuItems.forEach(item => item.classList.remove('active'));
            
            // 根据传入的导航项文本显示对应的内容
            // 如果没有传入导航项文本，则默认显示仪表盘
            if (!navText) {
                document.querySelector('.dashboard').style.display = 'grid';
                document.querySelector('.table-container').style.display = 'block';
                // 默认选中仪表盘菜单项
                menuItems[0].classList.add('active');
                return;
            }
            
            // 根据点击的导航项显示对应的内容
            switch(navText) {
                case '📊 仪表盘':
                    document.querySelector('.dashboard').style.display = 'grid';
                    document.querySelector('.table-container').style.display = 'block';
                    menuItems[0].classList.add('active');
                    break;
                case '📋 项目':
                    document.getElementById('projects-content').style.display = 'block';
                    menuItems[1].classList.add('active');
                    break;
                case '✅ 任务':
                    document.getElementById('tasks-content').style.display = 'block';
                    menuItems[2].classList.add('active');
                    break;
                case '👥 团队':
                    document.getElementById('team-content').style.display = 'block';
                    menuItems[3].classList.add('active');
                    break;
                case '📈 报表':
                    document.getElementById('reports-content').style.display = 'block';
                    menuItems[4].classList.add('active');
                    break;
                case '⚙️ 设置':
                    document.getElementById('settings-content').style.display = 'block';
                    menuItems[5].classList.add('active');
                    break;
                default:
                    // 默认显示仪表盘
                    document.querySelector('.dashboard').style.display = 'grid';
                    document.querySelector('.table-container').style.display = 'block';
                    menuItems[0].classList.add('active');
                    break;
            }
        }
        
        // 隐藏所有内容区域
        function hideAllContentAreas() {
            document.querySelector('.dashboard').style.display = 'none';
            document.querySelector('.table-container').style.display = 'none';
            document.getElementById('projects-content').style.display = 'none';
            document.getElementById('tasks-content').style.display = 'none';
            document.getElementById('team-content').style.display = 'none';
            document.getElementById('reports-content').style.display = 'none';
            document.getElementById('settings-content').style.display = 'none';
        }
        
        // 初始化任务复选框事件
        function initTaskCheckboxes() {
            const checkboxes = document.querySelectorAll('.task-item input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const label = this.nextElementSibling;
                    if (this.checked) {
                        label.classList.add('completed');
                        const dueDate = label.nextElementSibling;
                        dueDate.textContent = '已完成';
                    } else {
                        label.classList.remove('completed');
                        // 恢复原来的日期（这里简化处理）
                        const dueDate = label.nextElementSibling;
                        if (dueDate.textContent === '已完成') {
                            dueDate.textContent = '待定';
                        }
                    }
                    
                    // 更新仪表盘上的待处理任务数量
                    updatePendingTasksCount();
                });
            });
        }
        
        // 更新待处理任务数量
        function updatePendingTasksCount() {
            const totalTasks = document.querySelectorAll('.task-item').length;
            const completedTasks = document.querySelectorAll('.task-item input[type="checkbox"]:checked').length;
            const pendingTasks = totalTasks - completedTasks;
            
            // 更新仪表盘上的数字
            const pendingTasksCard = document.querySelector('.card:nth-child(2) .card-value');
            if (pendingTasksCard) {
                pendingTasksCard.textContent = pendingTasks;
            }
        }
        
        // 初始化添加任务功能
        function initAddTaskFeature() {
            const addTaskBtn = document.getElementById('add-task-btn');
            const newTaskInput = document.getElementById('new-task');
            
            if (addTaskBtn && newTaskInput) {
                addTaskBtn.addEventListener('click', function() {
                    const taskText = newTaskInput.value.trim();
                    if (taskText) {
                        addNewTask(taskText);
                        newTaskInput.value = '';
                    }
                });
                
                newTaskInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const taskText = newTaskInput.value.trim();
                        if (taskText) {
                            addNewTask(taskText);
                            newTaskInput.value = '';
                        }
                    }
                });
            }
        }
        
        // 添加新任务
        function addNewTask(taskText) {
            const tasksList = document.querySelector('.tasks-list');
            const taskId = 'task' + (document.querySelectorAll('.task-item').length + 1);
            
            const taskItem = document.createElement('div');
            taskItem.className = 'task-item';
            
            taskItem.innerHTML = `
                <input type="checkbox" id="${taskId}">
                <label for="${taskId}">${taskText}</label>
                <span class="task-due">今天</span>
                <span class="task-priority medium">中</span>
            `;
            
            tasksList.appendChild(taskItem);
            
            // 为新添加的复选框添加事件监听
            const checkbox = taskItem.querySelector('input[type="checkbox"]');
            checkbox.addEventListener('change', function() {
                const label = this.nextElementSibling;
                if (this.checked) {
                    label.classList.add('completed');
                    const dueDate = label.nextElementSibling;
                    dueDate.textContent = '已完成';
                } else {
                    label.classList.remove('completed');
                    const dueDate = label.nextElementSibling;
                    dueDate.textContent = '今天';
                }
                
                // 更新仪表盘上的待处理任务数量
                updatePendingTasksCount();
            });
            
            // 更新仪表盘上的待处理任务数量
            updatePendingTasksCount();
        }
        
        // 初始化项目卡片交互
        function initProjectCards() {
            // 添加项目按钮点击事件
            const addProjectBtn = document.querySelector('.btn-add-project');
            if (addProjectBtn) {
                addProjectBtn.addEventListener('click', function() {
                    alert('打开添加项目表单（此功能尚未实现）');
                });
            }
            
            // 项目卡片按钮点击事件
            const viewButtons = document.querySelectorAll('.btn-view');
            const editButtons = document.querySelectorAll('.btn-edit');
            
            viewButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const projectName = this.closest('.project-card').querySelector('h3').textContent;
                    alert(`查看项目详情：${projectName}（此功能尚未实现）`);
                });
            });
            
            editButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const projectName = this.closest('.project-card').querySelector('h3').textContent;
                    alert(`编辑项目：${projectName}（此功能尚未实现）`);
                });
            });
        }
        
        // 初始化主题切换功能
        function initThemeToggle() {
            const themeOptions = document.querySelectorAll('.theme-option');
            
            themeOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // 移除所有主题选项的活动状态
                    themeOptions.forEach(opt => opt.classList.remove('active'));
                    
                    // 添加当前选项的活动状态
                    this.classList.add('active');
                    
                    // 获取选择的主题
                    const theme = this.querySelector('.theme-preview').classList[1];
                    
                    // 应用主题（简化实现，实际应用中可能需要更复杂的逻辑）
                    document.body.className = ''; // 清除之前的主题
                    document.body.classList.add(`theme-${theme}`);
                    
                    // 显示提示消息
                    showNotification(`已切换到${this.querySelector('span').textContent}主题`);
                });
            });
        }
        
        // 初始化报表生成功能
        function initReportGeneration() {
            const generateBtn = document.querySelector('.btn-generate');
            const exportBtn = document.querySelector('.btn-export');
            
            if (generateBtn) {
                generateBtn.addEventListener('click', function() {
                    // 模拟报表生成过程
                    this.textContent = '生成中...';
                    this.disabled = true;
                    
                    setTimeout(() => {
                        this.textContent = '生成报表';
                        this.disabled = false;
                        
                        // 随机更新图表数据（简化实现）
                        updateChartData();
                        
                        showNotification('报表已生成');
                    }, 1500);
                });
            }
            
            if (exportBtn) {
                exportBtn.addEventListener('click', function() {
                    showNotification('报表已导出到您的下载文件夹');
                });
            }
        }
        
        // 更新图表数据
        function updateChartData() {
            // 更新柱状图
            const bars = document.querySelectorAll('.bar');
            bars.forEach(bar => {
                const randomHeight = Math.floor(Math.random() * 80) + 20; // 20% - 100%
                bar.style.height = `${randomHeight}%`;
            });
            
            // 更新报表摘要
            const summaryItems = document.querySelectorAll('.reports-summary li strong');
            summaryItems.forEach(item => {
                if (item.textContent.includes('%')) {
                    const randomPercent = Math.floor(Math.random() * 100);
                    item.textContent = `${randomPercent}%`;
                }
            });
        }
        
        // 显示通知消息
        function showNotification(message) {
            // 检查是否已存在通知元素
            let notification = document.querySelector('.notification');
            
            if (!notification) {
                // 创建通知元素
                notification = document.createElement('div');
                notification.className = 'notification';
                document.body.appendChild(notification);
                
                // 添加样式
                const style = document.createElement('style');
                style.textContent = `
                    .notification {
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        background-color: #2ecc71;
                        color: white;
                        padding: 12px 20px;
                        border-radius: 4px;
                        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                        z-index: 1000;
                        opacity: 0;
                        transform: translateY(-20px);
                        transition: opacity 0.3s, transform 0.3s;
                    }
                    .notification.show {
                        opacity: 1;
                        transform: translateY(0);
                    }
                `;
                document.head.appendChild(style);
            }
            
            // 设置消息内容
            notification.textContent = message;
            
            // 显示通知
            notification.classList.add('show');
            
            // 3秒后隐藏通知
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // 切换游戏显示
        function toggleGame(gameType) {
            const gameContainer = document.getElementById('game-container');
            const overlay = document.getElementById('overlay');
            const emergencyClose = document.getElementById('emergency-close');
            const game2048 = document.getElementById('game-2048');
            const gameSnake = document.getElementById('game-snake');
            const gameTitle = document.getElementById('game-title');
            
            if (gameType) {
                gameContainer.style.display = 'block';
                overlay.style.display = 'block';
                emergencyClose.style.display = 'block';
                
                // 隐藏所有游戏
                game2048.style.display = 'none';
                gameSnake.style.display = 'none';
                
                // 显示选择的游戏
                if (gameType === '2048') {
                    game2048.style.display = 'block';
                    gameTitle.textContent = '2048游戏';
                    if (!gameInitialized2048) {
                        initGame2048();
                    }
                } else if (gameType === 'snake') {
                    gameSnake.style.display = 'block';
                    gameTitle.textContent = '贪吃蛇游戏';
                    if (!gameInitializedSnake) {
                        initSnakeGame();
                    }
                }
            } else {
                gameContainer.style.display = 'none';
                overlay.style.display = 'none';
                emergencyClose.style.display = 'none';
            }
        }
        
        // 紧急关闭
        function emergencyClose() {
            toggleGame();
        }
        
        // 键盘快捷键
        document.addEventListener('keydown', function(event) {
            // ESC键关闭游戏
            if (event.key === 'Escape') {
                toggleGame();
            }
            
            // 2048游戏控制
            if (document.getElementById('game-2048').style.display === 'block') {
                if (event.key === 'ArrowUp' || event.key === 'ArrowDown' || 
                    event.key === 'ArrowLeft' || event.key === 'ArrowRight') {
                    event.preventDefault();
                    moveGame2048(event.key);
                }
            }
            
            // 贪吃蛇游戏控制
            if (document.getElementById('game-snake').style.display === 'block' && snakeGameRunning) {
                if (event.key === 'ArrowUp' || event.key === 'ArrowDown' || 
                    event.key === 'ArrowLeft' || event.key === 'ArrowRight') {
                    event.preventDefault();
                    changeSnakeDirection(event.key);
                }
            }
        });
        
        // 双击快速关闭
        document.addEventListener('dblclick', function(event) {
            if (event.target.closest('.game-container') === null) {
                toggleGame();
            }
        });
        
        // ===== 2048游戏逻辑 =====
        let gameInitialized2048 = false;
        let grid = [];
        let score = 0;
        
        function initGame2048() {
            gameInitialized2048 = true;
            resetGame2048();
        }
        
        function resetGame2048() {
            // 重置分数
            score = 0;
            document.getElementById('score').textContent = score;
            
            // 创建4x4网格
            const gridContainer = document.getElementById('grid-container');
            gridContainer.innerHTML = '';
            grid = [];
            
            for (let i = 0; i < 4; i++) {
                const gridRow = document.createElement('div');
                gridRow.className = 'grid-row';
                gridContainer.appendChild(gridRow);
                
                const rowArray = [];
                for (let j = 0; j < 4; j++) {
                    const gridCell = document.createElement('div');
                    gridCell.className = 'grid-cell';
                    gridRow.appendChild(gridCell);
                    rowArray.push(0);
                }
                grid.push(rowArray);
            }
            
            // 添加两个初始数字
            addRandomTile();
            addRandomTile();
            updateGridDisplay();
        }
        
        function addRandomTile() {
            // 找到所有空格子
            const emptyCells = [];
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 4; j++) {
                    if (grid[i][j] === 0) {
                        emptyCells.push({row: i, col: j});
                    }
                }
            }
            
            if (emptyCells.length > 0) {
                // 随机选择一个空格子
                const randomCell = emptyCells[Math.floor(Math.random() * emptyCells.length)];
                // 90%概率生成2，10%概率生成4
                grid[randomCell.row][randomCell.col] = Math.random() < 0.9 ? 2 : 4;
            }
        }
        
        function updateGridDisplay() {
            const gridRows = document.querySelectorAll('.grid-row');
            
            for (let i = 0; i < 4; i++) {
                const cells = gridRows[i].querySelectorAll('.grid-cell');
                for (let j = 0; j < 4; j++) {
                    const cell = cells[j];
                    const value = grid[i][j];
                    
                    // 清除之前的类
                    cell.className = 'grid-cell';
                    cell.textContent = '';
                    
                    if (value !== 0) {
                        cell.textContent = value;
                        cell.classList.add(`tile-${value}`);
                    }
                }
            }
        }
        
        function moveGame2048(direction) {
            let moved = false;
            
            // 根据方向移动和合并格子
            if (direction === 'ArrowUp') {
                moved = moveUp();
            } else if (direction === 'ArrowDown') {
                moved = moveDown();
            } else if (direction === 'ArrowLeft') {
                moved = moveLeft();
            } else if (direction === 'ArrowRight') {
                moved = moveRight();
            }
            
            if (moved) {
                addRandomTile();
                updateGridDisplay();
                document.getElementById('score').textContent = score;
                
                // 检查游戏是否结束
                if (isGameOver()) {
                    alert('游戏结束！你的分数是: ' + score);
                }
            }
        }
        
        function moveLeft() {
            let moved = false;
            
            for (let i = 0; i < 4; i++) {
                // 移动非零元素到左侧
                const row = grid[i].filter(val => val !== 0);
                
                // 合并相邻相同的数字
                for (let j = 0; j < row.length - 1; j++) {
                    if (row[j] === row[j + 1]) {
                        row[j] *= 2;
                        score += row[j];
                        row.splice(j + 1, 1);
                        moved = true;
                    }
                }
                
                // 填充零
                while (row.length < 4) {
                    row.push(0);
                }
                
                // 检查是否有移动
                for (let j = 0; j < 4; j++) {
                    if (grid[i][j] !== row[j]) {
                        moved = true;
                    }
                }
                
                grid[i] = row;
            }
            
            return moved;
        }
        
        function moveRight() {
            let moved = false;
            
            for (let i = 0; i < 4; i++) {
                // 移动非零元素到右侧
                const row = grid[i].filter(val => val !== 0);
                
                // 合并相邻相同的数字（从右向左）
                for (let j = row.length - 1; j > 0; j--) {
                    if (row[j] === row[j - 1]) {
                        row[j] *= 2;
                        score += row[j];
                        row.splice(j - 1, 1);
                        moved = true;
                        j--; // 调整索引
                    }
                }
                
                // 填充零
                while (row.length < 4) {
                    row.unshift(0);
                }
                
                // 检查是否有移动
                for (let j = 0; j < 4; j++) {
                    if (grid[i][j] !== row[j]) {
                        moved = true;
                    }
                }
                
                grid[i] = row;
            }
            
            return moved;
        }
        
        function moveUp() {
            let moved = false;
            
            for (let j = 0; j < 4; j++) {
                // 获取列
                let column = [];
                for (let i = 0; i < 4; i++) {
                    column.push(grid[i][j]);
                }
                
                // 移动非零元素到顶部
                column = column.filter(val => val !== 0);
                
                // 合并相邻相同的数字
                for (let i = 0; i < column.length - 1; i++) {
                    if (column[i] === column[i + 1]) {
                        column[i] *= 2;
                        score += column[i];
                        column.splice(i + 1, 1);
                        moved = true;
                    }
                }
                
                // 填充零
                while (column.length < 4) {
                    column.push(0);
                }
                
                // 更新列
                for (let i = 0; i < 4; i++) {
                    if (grid[i][j] !== column[i]) {
                        moved = true;
                    }
                    grid[i][j] = column[i];
                }
            }
            
            return moved;
        }
        
        function moveDown() {
            let moved = false;
            
            for (let j = 0; j < 4; j++) {
                // 获取列
                let column = [];
                for (let i = 0; i < 4; i++) {
                    column.push(grid[i][j]);
                }
                
                // 移动非零元素到底部
                column = column.filter(val => val !== 0);
                
                // 合并相邻相同的数字（从下向上）
                for (let i = column.length - 1; i > 0; i--) {
                    if (column[i] === column[i - 1]) {
                        column[i] *= 2;
                        score += column[i];
                        column.splice(i - 1, 1);
                        moved = true;
                        i--; // 调整索引
                    }
                }
                
                // 填充零
                while (column.length < 4) {
                    column.unshift(0);
                }
                
                // 更新列
                for (let i = 0; i < 4; i++) {
                    if (grid[i][j] !== column[i]) {
                        moved = true;
                    }
                    grid[i][j] = column[i];
                }
            }
            
            return moved;
        }
        
        function isGameOver() {
            // 检查是否有空格子
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 4; j++) {
                    if (grid[i][j] === 0) {
                        return false;
                    }
                }
            }
            
            // 检查是否有可以合并的相邻格子
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 3; j++) {
                    if (grid[i][j] === grid[i][j + 1]) {
                        return false;
                    }
                }
            }
            
            for (let j = 0; j < 4; j++) {
                for (let i = 0; i < 3; i++) {
                    if (grid[i][j] === grid[i + 1][j]) {
                        return false;
                    }
                }
            }
            
            return true;
        }
        
        // ===== 贪吃蛇游戏逻辑 =====
        let gameInitializedSnake = false;
let snake = [];
let food = {};
let direction = 'right';
let snakeGameRunning = false;
let gameInterval;
let snakeScore = 0;
let snakeHighScore = 0;
let snakeSpeed = 150; // 默认速度，数值越小越快
let snakeDifficulty = 'normal'; // 难度级别：easy, normal, hard
let snakeFoodValue = 10; // 每个食物的分数
let snakeGrowth = 1; // 每次吃食物增长的长度
let specialFood = null; // 特殊食物
let specialFoodTimer = null; // 特殊食物计时器
const boardSize = 20; // 20x20网格
const cellSize = 20; // 每个格子20px

function initSnakeGame() {
    gameInitializedSnake = true;
    const board = document.getElementById('snake-board');
    board.innerHTML = '';
    
    // 创建网格
    for (let i = 0; i < boardSize; i++) {
        for (let j = 0; j < boardSize; j++) {
            const cell = document.createElement('div');
            cell.style.width = cellSize + 'px';
            cell.style.height = cellSize + 'px';
            cell.style.position = 'absolute';
            cell.style.left = j * cellSize + 'px';
            cell.style.top = i * cellSize + 'px';
            cell.id = `cell-${i}-${j}`;
            board.appendChild(cell);
        }
    }
    
    // 创建分数显示
    const scoreContainer = document.createElement('div');
    scoreContainer.className = 'snake-score';
    scoreContainer.id = 'snake-score';
    scoreContainer.textContent = '分数: 0 | 最高分: 0';
    
    // 创建难度选择
    const difficultyContainer = document.createElement('div');
    difficultyContainer.className = 'snake-controls';
    difficultyContainer.style.marginBottom = '15px';
    difficultyContainer.innerHTML = `
        <button onclick="setSnakeDifficulty('easy')" id="easy-btn">简单</button>
        <button onclick="setSnakeDifficulty('normal')" id="normal-btn" style="background-color: #3d8b40;">普通</button>
        <button onclick="setSnakeDifficulty('hard')" id="hard-btn">困难</button>
    `;
    
    // 将分数和难度选择添加到游戏容器
    const gameContainer = document.querySelector('.game-snake');
    gameContainer.insertBefore(scoreContainer, board);
    gameContainer.insertBefore(difficultyContainer, scoreContainer);
    
    // 添加触摸控制事件监听器
    setupTouchControls();
    
    resetSnakeGame();
}

function setSnakeDifficulty(level) {
    snakeDifficulty = level;
    
    // 重置按钮样式
    document.getElementById('easy-btn').style.backgroundColor = '#4CAF50';
    document.getElementById('normal-btn').style.backgroundColor = '#4CAF50';
    document.getElementById('hard-btn').style.backgroundColor = '#4CAF50';
    
    // 设置选中按钮样式
    document.getElementById(`${level}-btn`).style.backgroundColor = '#3d8b40';
    
    // 根据难度设置游戏参数
    switch(level) {
        case 'easy':
            snakeSpeed = 200;
            snakeFoodValue = 5;
            snakeGrowth = 1;
            break;
        case 'normal':
            snakeSpeed = 150;
            snakeFoodValue = 10;
            snakeGrowth = 1;
            break;
        case 'hard':
            snakeSpeed = 100;
            snakeFoodValue = 15;
            snakeGrowth = 1;
            break;
    }
    
    // 如果游戏正在运行，重新设置速度
    if (snakeGameRunning) {
        pauseSnakeGame();
        startSnakeGame();
    }
}

function resetSnakeGame() {
    // 重置分数
    snakeScore = 0;
    updateSnakeScore();
    
    // 初始化蛇
    snake = [
        {x: 10, y: 10},
        {x: 9, y: 10},
        {x: 8, y: 10}
    ];
    
    // 初始方向
    direction = 'right';
    
    // 清除特殊食物
    if (specialFoodTimer) {
        clearTimeout(specialFoodTimer);
        specialFoodTimer = null;
    }
    specialFood = null;
    
    // 生成食物
    generateFood();
    
    // 绘制初始状态
    clearBoard();
    drawSnake();
    drawFood();
    
    // 停止任何现有的游戏循环
    if (gameInterval) {
        clearInterval(gameInterval);
        gameInterval = null;
    }
    
    snakeGameRunning = false;
}

function clearBoard() {
    // 清除所有格子的样式
    const cells = document.querySelectorAll('#snake-board div');
    cells.forEach(cell => {
        cell.style.backgroundColor = '';
        cell.style.borderRadius = '0';
        cell.style.boxShadow = 'none';
        cell.style.transform = 'scale(1)';
        cell.className = '';
    });
}

function startSnakeGame() {
    if (!snakeGameRunning) {
        snakeGameRunning = true;
        // 确保食物可见
        drawFood();
        if (specialFood) drawSpecialFood();
        gameInterval = setInterval(moveSnake, snakeSpeed);
    }
}

function pauseSnakeGame() {
    snakeGameRunning = false;
    if (gameInterval) {
        clearInterval(gameInterval);
        gameInterval = null;
    }
}

function updateSnakeScore() {
    const scoreElement = document.getElementById('snake-score');
    if (scoreElement) {
        if (snakeScore > snakeHighScore) {
            snakeHighScore = snakeScore;
        }
        scoreElement.textContent = `分数: ${snakeScore} | 最高分: ${snakeHighScore}`;
    }
}

function generateFood() {
    // 随机生成食物位置
    let foodX, foodY;
    let validPosition = false;
    
    while (!validPosition) {
        foodX = Math.floor(Math.random() * boardSize);
        foodY = Math.floor(Math.random() * boardSize);
        
        // 确保食物不在蛇身上
        validPosition = true;
        for (let i = 0; i < snake.length; i++) {
            if (snake[i].x === foodX && snake[i].y === foodY) {
                validPosition = false;
                break;
            }
        }
        
        // 确保不与特殊食物重叠
        if (specialFood && foodX === specialFood.x && foodY === specialFood.y) {
            validPosition = false;
        }
    }
    
    food = {x: foodX, y: foodY};
    
    // 有10%的几率生成特殊食物
    if (!specialFood && Math.random() < 0.1) {
        generateSpecialFood();
    }
}

function generateSpecialFood() {
    // 随机生成特殊食物位置
    let foodX, foodY;
    let validPosition = false;
    
    while (!validPosition) {
        foodX = Math.floor(Math.random() * boardSize);
        foodY = Math.floor(Math.random() * boardSize);
        
        // 确保特殊食物不在蛇身上和普通食物上
        validPosition = true;
        for (let i = 0; i < snake.length; i++) {
            if (snake[i].x === foodX && snake[i].y === foodY) {
                validPosition = false;
                break;
            }
        }
        
        if (food.x === foodX && food.y === foodY) {
            validPosition = false;
        }
    }
    
    specialFood = {x: foodX, y: foodY, value: snakeFoodValue * 3};
    drawSpecialFood();
    
    // 特殊食物5秒后消失
    specialFoodTimer = setTimeout(() => {
        specialFood = null;
        clearSpecialFood();
    }, 5000);
}

function clearSpecialFood() {
    if (!specialFood) return;
    
    const cell = document.getElementById(`cell-${specialFood.y}-${specialFood.x}`);
    if (cell) {
        cell.style.backgroundColor = '';
        cell.style.boxShadow = 'none';
        cell.style.animation = 'none';
        cell.className = '';
    }
    specialFood = null;
}

function drawSnake() {
    // 绘制蛇
    snake.forEach((segment, index) => {
        const cell = document.getElementById(`cell-${segment.y}-${segment.x}`);
        if (cell) {
            if (index === 0) {
                // 蛇头
                cell.className = 'snake-head';
                cell.style.width = cellSize + 'px';
                cell.style.height = cellSize + 'px';
                cell.style.left = segment.x * cellSize + 'px';
                cell.style.top = segment.y * cellSize + 'px';
                
                // 根据方向设置蛇头的旋转
                let rotation = 0;
                switch(direction) {
                    case 'up': rotation = -90; break;
                    case 'down': rotation = 90; break;
                    case 'left': rotation = 180; break;
                    case 'right': rotation = 0; break;
                }
                cell.style.transform = `rotate(${rotation}deg)`;
            } else {
                // 蛇身
                cell.className = 'snake-body';
                cell.style.width = cellSize + 'px';
                cell.style.height = cellSize + 'px';
                cell.style.left = segment.x * cellSize + 'px';
                cell.style.top = segment.y * cellSize + 'px';
                
                // 蛇身体渐变效果
                const greenValue = Math.max(140 - index * 3, 100);
                cell.style.backgroundColor = `rgb(139, ${greenValue}, 74)`;
            }
        }
    });
}

function drawFood() {
    const foodCell = document.getElementById(`cell-${food.y}-${food.x}`);
    if (foodCell) {
        foodCell.className = 'snake-food';
        foodCell.style.width = cellSize + 'px';
        foodCell.style.height = cellSize + 'px';
        foodCell.style.left = food.x * cellSize + 'px';
        foodCell.style.top = food.y * cellSize + 'px';
    } else {
        console.error('找不到食物单元格:', `cell-${food.y}-${food.x}`);
        // 重新尝试生成食物
        generateFood();
        const retryFoodCell = document.getElementById(`cell-${food.y}-${food.x}`);
        if (retryFoodCell) {
            retryFoodCell.className = 'snake-food';
            retryFoodCell.style.width = cellSize + 'px';
            retryFoodCell.style.height = cellSize + 'px';
            retryFoodCell.style.left = food.x * cellSize + 'px';
            retryFoodCell.style.top = food.y * cellSize + 'px';
        }
    }
}

function drawSpecialFood() {
    if (!specialFood) return;
    
    const foodCell = document.getElementById(`cell-${specialFood.y}-${specialFood.x}`);
    if (foodCell) {
        foodCell.className = 'snake-food';
        foodCell.style.width = cellSize + 'px';
        foodCell.style.height = cellSize + 'px';
        foodCell.style.left = specialFood.x * cellSize + 'px';
        foodCell.style.top = specialFood.y * cellSize + 'px';
        foodCell.style.backgroundColor = '#E91E63'; // 粉色特殊食物
        foodCell.style.boxShadow = '0 0 15px rgba(233, 30, 99, 0.8)';
        foodCell.style.animation = 'pulse 0.5s infinite alternate';
    }
}

function moveSnake() {
    if (!snakeGameRunning) return;
    
    // 计算新的头部位置
    const head = {...snake[0]};
    
    switch (direction) {
        case 'up':
            head.y--;
            break;
        case 'down':
            head.y++;
            break;
        case 'left':
            head.x--;
            break;
        case 'right':
            head.x++;
            break;
    }
    
    // 检查是否撞墙
    if (head.x < 0 || head.x >= boardSize || head.y < 0 || head.y >= boardSize) {
        gameOver();
        return;
    }
    
    // 检查是否撞到自己
    for (let i = 0; i < snake.length; i++) {
        if (snake[i].x === head.x && snake[i].y === head.y) {
            gameOver();
            return;
        }
    }
    
    // 添加新的头部
    snake.unshift(head);
    
    // 检查是否吃到食物
    let ate = false;
    
    // 检查是否吃到普通食物
    if (head.x === food.x && head.y === food.y) {
        // 增加分数
        snakeScore += snakeFoodValue;
        updateSnakeScore();
        
        // 生成新的食物
        generateFood();
        ate = true;
        
        // 播放吃食物的动画效果
        playEatAnimation();
    }
    
    // 检查是否吃到特殊食物
    if (specialFood && head.x === specialFood.x && head.y === specialFood.y) {
        // 增加分数
        snakeScore += specialFood.value;
        updateSnakeScore();
        
        // 清除特殊食物计时器
        if (specialFoodTimer) {
            clearTimeout(specialFoodTimer);
            specialFoodTimer = null;
        }
        
        specialFood = null;
        ate = true;
        
        // 播放吃特殊食物的动画效果
        playSpecialEatAnimation();
    }
    
    // 如果没有吃到食物，移除尾部
    if (!ate) {
        snake.pop();
    } else {
        // 如果吃到食物，根据难度增加额外的长度
        for (let i = 1; i < snakeGrowth; i++) {
            const tail = snake[snake.length - 1];
            snake.push({...tail});
        }
    }
    
    // 清除棋盘并重新绘制
    clearBoard();
    drawSnake();
    drawFood();
    if (specialFood) drawSpecialFood();
}

function playEatAnimation() {
    // 创建一个临时元素显示得分动画
    const scoreAnim = document.createElement('div');
    scoreAnim.textContent = `+${snakeFoodValue}`;
    scoreAnim.style.position = 'absolute';
    scoreAnim.style.left = (food.x * cellSize) + 'px';
    scoreAnim.style.top = (food.y * cellSize) + 'px';
    scoreAnim.style.color = '#4CAF50';
    scoreAnim.style.fontWeight = 'bold';
    scoreAnim.style.fontSize = '16px';
    scoreAnim.style.zIndex = '100';
    scoreAnim.style.animation = 'fadeUp 1s forwards';
    
    // 添加动画样式
    const style = document.createElement('style');
    style.textContent = `
        @keyframes fadeUp {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-20px); }
        }
    `;
    document.head.appendChild(style);
    
    // 添加到棋盘
    const board = document.getElementById('snake-board');
    board.appendChild(scoreAnim);
    
    // 动画结束后移除元素
    setTimeout(() => {
        board.removeChild(scoreAnim);
        document.head.removeChild(style);
    }, 1000);
}

function playSpecialEatAnimation() {
    // 创建一个临时元素显示得分动画
    const scoreAnim = document.createElement('div');
    scoreAnim.textContent = `+${specialFood.value}`;
    scoreAnim.style.position = 'absolute';
    scoreAnim.style.left = (specialFood.x * cellSize) + 'px';
    scoreAnim.style.top = (specialFood.y * cellSize) + 'px';
    scoreAnim.style.color = '#E91E63';
    scoreAnim.style.fontWeight = 'bold';
    scoreAnim.style.fontSize = '20px';
    scoreAnim.style.zIndex = '100';
    scoreAnim.style.animation = 'specialFadeUp 1.5s forwards';
    
    // 添加动画样式
    const style = document.createElement('style');
    style.textContent = `
        @keyframes specialFadeUp {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            50% { opacity: 1; transform: translateY(-10px) scale(1.5); }
            100% { opacity: 0; transform: translateY(-30px) scale(1); }
        }
    `;
    document.head.appendChild(style);
    
    // 添加到棋盘
    const board = document.getElementById('snake-board');
    board.appendChild(scoreAnim);
    
    // 动画结束后移除元素
    setTimeout(() => {
        board.removeChild(scoreAnim);
        document.head.removeChild(style);
    }, 1500);
}

function changeSnakeDirection(key) {
    // 防止180度转向
    switch (key) {
        case 'ArrowUp':
            if (direction !== 'down') direction = 'up';
            break;
        case 'ArrowDown':
            if (direction !== 'up') direction = 'down';
            break;
        case 'ArrowLeft':
            if (direction !== 'right') direction = 'left';
            break;
        case 'ArrowRight':
            if (direction !== 'left') direction = 'right';
            break;
    }
}

function gameOver() {
    pauseSnakeGame();
    
    // 创建游戏结束动画
    const gameOverDiv = document.createElement('div');
    gameOverDiv.style.position = 'absolute';
    gameOverDiv.style.top = '50%';
    gameOverDiv.style.left = '50%';
    gameOverDiv.style.transform = 'translate(-50%, -50%)';
    gameOverDiv.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';
    gameOverDiv.style.color = 'white';
    gameOverDiv.style.padding = '20px';
    gameOverDiv.style.borderRadius = '10px';
    gameOverDiv.style.textAlign = 'center';
    gameOverDiv.style.zIndex = '100';
    gameOverDiv.style.animation = 'fadeIn 0.5s';
    gameOverDiv.innerHTML = `
        <h2>游戏结束</h2>
        <p>你的分数: ${snakeScore}</p>
        <p>蛇的长度: ${snake.length}</p>
        <button id="restart-btn" style="padding: 8px 16px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; margin-top: 10px;">重新开始</button>
    `;
    
    // 添加动画样式
    const style = document.createElement('style');
    style.textContent = `
        @keyframes fadeIn {
            from { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
    `;
    document.head.appendChild(style);
    
    // 添加到棋盘
    const board = document.getElementById('snake-board');
    board.appendChild(gameOverDiv);
    
    // 添加重新开始按钮事件
    document.getElementById('restart-btn').addEventListener('click', function() {
        board.removeChild(gameOverDiv);
        document.head.removeChild(style);
        resetSnakeGame();
    });
}

// 设置触摸控制
function setupTouchControls() {
    // 获取触摸控制按钮
    const upBtn = document.getElementById('up-btn');
    const downBtn = document.getElementById('down-btn');
    const leftBtn = document.getElementById('left-btn');
    const rightBtn = document.getElementById('right-btn');
    const board = document.getElementById('snake-board');
    
    // 添加按钮点击事件
    if (upBtn) {
        upBtn.addEventListener('click', function() {
            if (snakeGameRunning) {
                changeSnakeDirection('ArrowUp');
            }
        });
    }
    
    if (downBtn) {
        downBtn.addEventListener('click', function() {
            if (snakeGameRunning) {
                changeSnakeDirection('ArrowDown');
            }
        });
    }
    
    if (leftBtn) {
        leftBtn.addEventListener('click', function() {
            if (snakeGameRunning) {
                changeSnakeDirection('ArrowLeft');
            }
        });
    }
    
    if (rightBtn) {
        rightBtn.addEventListener('click', function() {
            if (snakeGameRunning) {
                changeSnakeDirection('ArrowRight');
            }
        });
    }
    
    // 添加触摸滑动事件
    if (board) {
        let touchStartX = 0;
        let touchStartY = 0;
        
        board.addEventListener('touchstart', function(e) {
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
        }, false);
        
        board.addEventListener('touchmove', function(e) {
            e.preventDefault(); // 防止页面滚动
        }, false);
        
        board.addEventListener('touchend', function(e) {
            if (!snakeGameRunning) return;
            
            const touchEndX = e.changedTouches[0].clientX;
            const touchEndY = e.changedTouches[0].clientY;
            
            const diffX = touchEndX - touchStartX;
            const diffY = touchEndY - touchStartY;
            
            // 判断滑动方向
            if (Math.abs(diffX) > Math.abs(diffY)) {
                // 水平滑动
                if (diffX > 0) {
                    changeSnakeDirection('ArrowRight');
                } else {
                    changeSnakeDirection('ArrowLeft');
                }
            } else {
                // 垂直滑动
                if (diffY > 0) {
                    changeSnakeDirection('ArrowDown');
                } else {
                    changeSnakeDirection('ArrowUp');
                }
            }
        }, false);
    }
}
    </script>
</body>
</html>